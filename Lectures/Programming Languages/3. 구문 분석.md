# **구문 분석**

## **학습 목표**

어휘 분석의 개념을 이해하고 토큰의 종류를 설명할 수 있다.

구문 분석을 위한 유도와 파스 트리의 개념을 설명할 수 있다.

모호한 문법의 개념을 이해하고 모호성을 제거하는 방법을 설명할 수 있다.
___

## **1. 어휘 분석**

### **프로그램 분석**
```c
int x12;
x12 = 1 + 5 * 2;
if x12>10 then ...
```
위와 같이 가상의 프로그램이 있다면 컴퓨터는 이 프로그램을 보고 실행하기 위해 분석한다.

1. 문자의 분석
    - i, n, t, x, 1, 2, ;, =, +, 5, *, f, >, …

2. 어휘의 분석
    - int, x12, ;, =, 1, +, 5, if, >, 10, then, …

3. 구문의 분석
    - <선언문> ::= <자료형> <변수> ;
    - <대입문> ::= <변수> = <수식> ;

### **어휘 분석**

- 프로그램에서 사용된 단어를 구별해 냄
    - "x12"가 하나의 덩어리(어휘)인지 파악.
- 토큰:어휘 분석을 통해 얻어지는 결과
    - 연산자, 구분자, 식별자, 예약어 등
        - 연산자 : +, -, *, /, = 등
        - 구분자 : ,(콤마), ;, [, ] 등

- ## **식별자(identifier)**

    - 변수나 함수 등의 이름을 나타내는 토큰
        - x12, printf 등

    - 전통적인 식별자: 문자와 숫자로 구성, 첫 글자는 문자
        - x12는 변수나 함수라고 딱 정해져 있지는 않지만 식별자 규칙에 따라 토큰으로 정의됨. 
        - 언어들 마다 식별자 규칙이 다르게 정의될 수도 있음.

```c
// 식별자(identifier)는 하나의 문자(letter)이거나, identifier 다음 letter나 digit으로 이어진다.
<identifier> ::= <letter> | <identifier><letter> | <identifier><digit>

// letter의 정의
<letter> ::= A | B | C | ... | X | Y | Z | a | b | ... | z

// digit의 정의
<digit> ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
```

- ## **예약어(reserved word)**

    - 프로그래밍 언어 자체에 정의되어 포함된 토큰
        - if,for,int 등

    - 식별자와 구문 구조가 같지만 식별자로 사용 못함
        - 사용자 재정의 불가

    - 어휘 분석기에서 예약어를 별도로 관리한다.

___

## **2. 구문 분석**

어휘 분석으로 토큰들이 다 나왔으므로,  
이 어휘들로 구문 규칙을 통해 최종적인 프로그램이 만들어지는 과정.

### **유도(derivation)**
- 구문 규칙을 이용하여 주어진 프로그램을 만들어 내는 과정
- 유도가 가능하면 문법적 오류가 없는 유효한 프로그램임.

- 예시
    ```c
    //수식 
    1+5*2

    // 구문 규칙
    <exp> ::= <exp>+<exp> | <exp>-<exp> | <exp>*<exp> | <exp>/<exp> | (<exp>) | <digit>
    <digit> ::= 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9
    ```

    일 때, 다음과 같은 순서로 구문이 분석된다.
    ```
    <exp>
    → <exp>+<exp>
    → <exp>+<exp>*<exp>
    → <exp>+<exp>*<digit>
    → <exp>+<exp>*2
    → <exp>+<digit>*2
    → <exp>+5*2
    → <digit>+5*2
    → 1+5*2
    ```
    해당 수식이 정상적으로 유도가 되었으므로,   
    이 수식은 오류가 없는 잘 작성된 구문이라고 판단되어지며 구문 분석이 완료된다.

### **파스 트리(parse tree)**

- 유도를 트리 형태로 나타낸 것

- 구조
    - 루트 노드:시작 비단말 기호
    - 비단말 노드:비단말 기호
    - 단말 노드:단말 기호

- 단말 노드를 왼쪽부터 오른쪽으로 차례로 나열하면 주어진 프로그램이 됨

___

## **학습 정리**

프로그램의 분석은 크게 **어휘 분석**과 **구문 분석**으로 나눌 수 있다.

어휘 분석을 통해 프로그램에서 사용된 단어인 **토큰**을 구별해 낸다. 토큰의 종류에는 연산자, 구분자, 식별자, 예약어 등이 있다.

**식별자**는 변수나 함수 등의 이름을 나타내는 토큰이다.

**예약어**는 프로그래밍 언어 자체에 정의되어 포함된 토큰으로 사용자 재정의가 불가능하다.

**유도**는 구문 규칙을 이용하여 주어진 프로그램을 만들어 내는 과정으로, 유도가 가능하다면 주어진 프로그램은 문법적 오류가 없다.

**파스 트리**는 유도를 트리 형태로 나타낸 것으로, 루트 노드는 시작 비단말 기호, 단말 노드는 단말 기호가 된다. 단말 노드를 왼쪽부터 오른쪽으로 차례로 나열하면 주어진 프로그램이 된다.

주어진 표현에 대한 파스 트리가 존재하면 구문에 부합하는 표현이지만, 파스 트리가 존재하지 않으면 오류가 있는 표현이다.

모호한 문법은 동일한 표현에 대해 서로 다른 파스 트리가 만들어지는 문법으로, 하나의 프로그램이 서로 다른 결과를 도출할 수 있는 위험을 내포하고 있다.

모호한 문법은 문법을 명확하게 변경하여 모호성을 제거해야 한다.