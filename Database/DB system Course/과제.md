힙 파일 구조(Heap File Organization)

파일 안에 레코드를 위한 공간만 있으면 임의의 레코드는 어디든지 놓일 수 있는 구조
가장 단순한 파일 조직으로 일반적으로 레코드들이 삽입된 순서대로 파일에 저장되는 비 순서 파일 구조
새로 삽입되는 레코드는 파일의 가장 끝에 첨부되는데, 파일 중간에 빈 공간이 있으면 삽입 가능
원하는 레코드를 찾기 위해서는 모든 레코드들을 순차적으로 접근해야 하며, 삭제는 원하는 레코드를 찾은 후에 그 레코드를 삭제함
좋은 성능을 유지하기 위해 힙 파일을 주기적으로 재구성할 필요가 있음
힙 파일은 질의에서 모든 레코드들을 참조하고 레코들을 접근하는 순서가 중요하지 않을 때 사용하는 것이 효율적

저장순서 고려 없이 파일 내 임의의 위치에 배치

`장점`
어느 특정 블록을 찾아서 레코드를 저장시키는 것이 아니라
저장할 크기가 있는 아무 블록에다가 저장하므로 저장의 속도는 가장 빠르다.
`단점`
어떤 특정 레코드를 검색해야 하는 경우 임의의 블록으로 저장되어 있어
하나씩 블록을 탐색해서 찾아야 하므로 검색 속도는 느리다.

파일 구조는요 어떤 특정한 순서가 없습니다
일단 그냥 근처에 있는 블럭 무조건 갖다써
그래서 메모리에 올라와있는 블럭 아무거나 니가 쓴 다음에 거기에 빈 공간이 있으면 거기에 저장시켜 라고 하는 게 힙 파일구조입니다
파일구조에 가장 큰 장점은 뭐냐 하면 어느 블럭을 찾아다가 저장시키는 게 아니라 그냥 무작위로 접근을 해서 빈 공간이 있으면 저장을 하기 때문에 저장의 속도는 가장 빠르다고 할 수 있습니다
그런데 이런 문제가 있어요
나중에 손흥민이 지금 근무하는 부서는 어디야라고 물어보면 손흥민 레코드를 찾아다가 메모리에
올려야 되잖아요 어디 있을까요
무작위로 저장했으니까 어디에 저장되는지 모릅니다 그러니까
순차적으로 하나씩 모든 블럭을 다 메모리에 올려다가 손흥민 레코드가 있어야 하는지를 알아 봐야 되는 거죠
저장은 빠르지만 사용의 효율은 가장 떨어지는 그런 형태의 파일 구조화 방식이라고 할 수가 있습니다

##


=================================================================================================

순차 파일 구조(Sequential File Organization)
입력된 레코드들을 논리적인 순서에 따라 물리적 연속 공간에 순차적으로 기록하는 방식
레코드들의 물리적 순서가 그 레코드들의 논리적 순서와 같게 저장
급여 관리 등과 같이 변동 사항이 크지 않고 기간별로 일괄 처리를 주로 하는 경우에 적합
삽입 연산은 삽입하려는 레코드의 순서를 고려해야 하기 때문에 시간이 많이 걸릴 수 있음
삭제 연산은 삭제된 레코드가 사용하던 공간을 빈 공간으로 남기기 때문에 힙 파일의 경우와 마찬가지로 주기적으로 순차 파일을 재구성해야 함
순차 파일의 종류
엔트리(Entry) 순차 파일 : 레코드가 시스템에 삽입되는 순서대로 만들어지는 파일
키(Key) 순차 파일 : 레코드들의 키 값의 순서대로 만들어지는 파일
장점
기록 밀도가 높아 기억 공간을 효율적으로 사용할 수 있으며, 매체 변환이 쉬워 어떠한 매체에도 적용할 수 있음
레코드를 기록할 때 사용한 키 순서대로 레코드를 처리하는 경우에는 매우 빠름
단점
파일에 새로운 레코드를 삽입 및 삭제하는 경우, 파일 전체를 복사해야 하므로 시간이 많이 소요
데이터 검색 시 처음부터 순차적으로 검색하기 때문에 직접 접근이 어려움

`순차 파일 구조`는 뭐냐면 정해진 `탐색키`가 있습니다
이 레코드는 무조건 번을 기준으로 저장을 할 거야라고 하면 번 기준에 맞춰서 이렇게 어느 블록으로 들어갈지 쭉 순서를 정해놓습니다
그래서 이라는 사번을 갖는 손흥민 레코드가 들어오게 되면 그 레코드는 아마 가장 크니까 맨 마지막 블럭으로
들어가라고 하는 식으로 정해지는 것 이죠
물론 순서를 고려해야 되니까 당연히 힙파일 구조 보다는 훨씬 더 저장에
속도는 증가할 거라고 봅니다
반면에 검색 속도는 어떨까요 당연히 빠르겠죠
뭐냐 하면 모든 블럭 안에 레코드에 저장 순서는 요 번 값에 순서로 저장돼 있는 거잖아요
바로 이진 탐색 트리 있잖아요
그것처럼 일단 중간을 봐요 그렇죠
이거보다 크면 그 위에
크면  찾으려고 하는 사번이 중간보다 크면 어떻게 해요
그 이후에 절반을 통해서 뒤져보면 되는 거잖아요
이런 식으로 이진 탐색 방법을 써가지고 굉장히 빠른 속도로 검색을 할 수 있는 게 바로 순차 파일 구조라고

=================================================================================================

`해시 파일구조`는 뭐냐 하면
탐색키가 만약에 사번이라고 하면 사번을 어떤 블랙박스 안에다 집어넣어요

그래서 나온 어떤 번호에 맞춰서 그렇게 블럭을 정해서 저장이 되고요

내가 만약에 손흥민 레코드를 찾고 싶으면 손흥민 사번은 이니까 그 을 블랙박스라고 하는 해시

함수에 집어넣으면 어떻게해요 다시 똑같은 블럭번호가 나오니까 그 블럭가서 찾어라고 해서 알 수 있는 방법이죠

그래서 일종의 약간의 번호 생성기 이런 것들을 통해서 블럭 주소를 계산해서 저장하는 구조가 바로 해시파일 구조라고 헐 수 있는데요

해시 파일 구조도 물론 자주 사용됩니다

하지만 이 해시 함수에 따라서 해시파일 구조의 성능차가 어마어마하게 많이 나서 실질적으로는 가장 많이 사용되는 건

순차 파일 구조다라고 할 수가 있죠

