# SQLD - 데이터 모델링

**1. 모델링의 3대 특징** 
- 추상화
- 단순화
- 명확화

- 모델링은 현실 세계의 복잡하고 구체적인 것을 단순 명확하게 추상화한다. 
- *구체화(x)*

#

**2. 데이터 모델의 추상화 수준** 

`개념 > 논리 > 물리`

- **개념 데이터 모델** : 추상화 수준이 높고 주로 핵심 엔터티와 그들간의 관계를 나타낸 데이터 모델. 업무중심적, 포괄적.
- **논리 데이터 모델** : 모든 엔터티, 속성. 관계를 도출하고 중복 제거를 위해 정규화를 적용. 업무에 대한 키, 속성, 관계 등을 정확하게 표현.
- **물리 데이터 모델** : 데이터베이스 이식을 위해 성능, 저장 등 물리 요소를 고려하여 설계.

#

**3. 인스턴스**
- 엔터티는 `인스턴스`의 집합이라고 할 수 있다. 예를 들어 부서는 인사, 총무, 영업 등이 존재할 수 있는데 인사, 총무, 영업 각각은 부서 엔터티의 인스턴스들이라고 할 수 있다.
    - 각 인스턴스의 성격을 구체적으로 설명하는 항목이 `속성`이고, `식별자`는 인터티의 여러 속성 중 각 인스턴스를 유일하게 식별할 수 있는 하나 이상의 속성을 의미.

#

**4. 엔터티**
- 변별할 수 있는 사물
- 데이터베이스 내에서 변별 가능한 객체
- 정보를 저장할 수 있는 어떤 것.
    
#

**5. 관계 (Relationship)**  

<img src="https://user-images.githubusercontent.com/66513003/118942125-66bb2480-b98d-11eb-8662-60f820695850.png
" width="300">

- 계좌를 개설한 고객이 반드시 존재해야 한다.
- 고객과 계좌의 관계에서 고객의 식별자인 고객 번호가 계좌의 일반 속성으로 사용되므로 비식별자 관계이다. 계좌의 주민등록번호는 관계에 의해 생성된 관계속성이 아니며, 중복 속성 으로 볼 수 있다.
- 자식엔터티의 계좌 기준으로 부모인 고객 엔터티를 `필수 관계`로 정의했으므로 고객으로 등록한 고객만 계좌를 개설할 수 있다. 부모 엔터티인 고객 기준으로 자식인 계좌 엔터티를 `선택 관계`로 정의 (고객 쪽 관계선이 점선)했으므로 모든 고객이 계좌를 개설해야 하는 것은 아니다.

#

- 부모 엔터티의 식별자를 자식 엔터티의 식별자로 상속하면 '식별관계', 일반속성으로 상속하변 '비식별관계'라고 한다.
- 부모 엔터티의 식별자가 아닌 일반 속성을 자식 엔터티의 속성으로 정의한다면, 정상적인 관계속성이 아니다. 정혀 관련없이 이름만 같은 (=이름은 같지만 엔터티별로 의미가 다른) 속성이거나 부모 속성을 반정규화한 중복 속성일 수도 있다.

#

**6. 다른 엔터티와의 관계에 의해 생성된 속성**  

<img src="https://user-images.githubusercontent.com/66513003/118944847-e5b15c80-b98f-11eb-902d-f81c47d9651e.png
" width="150">

- 관계 속성(외래 식별자)에는 FK(Foreign Key)표현을 추가한다.

#

**7. 데이터 모델**

<img src="https://user-images.githubusercontent.com/66513003/118945798-c0711e00-b990-11eb-9bef-62e3a180c0f6.png
" width="400">

- 부서와 사원은 M:M관계이다.
- 사원은 반드시 하나 이상의 부서에 속해야 한다.
- 부서에는 동일 사원이 중복하여 소속될 수 없다.
- 부서소속사원은 부서와 사원 간 M:M 관계를 엔터티로 풀어서 재정의한 관계엔터티.
- 부서 기준으로 부서소속사원을 `1:M 선택 관계`로 정의했다. 따라서 부서가 여러 소속사원을 가질 수 있지만, 소속사원이 없는 부서도 존재할 수 있다. 
- 사원 기준으로 부서 소속사원을 `1:M 필수 관계로` 정의했으므로 사원을 여러 부서에 속할 수 있으며, 반드시 하나 이상의 부서에 속해야 한다.
- 부서소속사원의 식별자는 양쪽 부모로부터 상속한 부서번호와 사번이다. 두 값을 조합했을 때, 중복 인스턴스를 허용하지 않는다는 뜻이다. 따라서 한 부서에 소속사원이 여럿일 수 있지만, 같은 사원을 여러 번 등록할 수는 없다.

#

<img src="https://user-images.githubusercontent.com/66513003/118946989-ddf2b780-b991-11eb-976d-30b8e07f078f.png
" width="300">

- **선택 관계** : 부모 인스턴스만 등록하고 자식 인스턴스는 등록하지 않아도 된다.

- **필수 관계** : 부모 인스턴스별로 자식 인스턴스를 반드시 등록해야 한다.

#### 참조 - **관계** https://doorbw.tistory.com/228

#

**8. 식별자**

<img src="https://user-images.githubusercontent.com/66513003/118949680-725e1980-b994-11eb-85b7-12c34b69c27e.png
" width="400">

- 고객은 한번 이상 주문을 할 수 있다.
- 한 주문에 여러 상품을 구매할 수 있다.
- 고객은 동일 상품을 여러 번 주문할 수 있다.

- 주문상세의 식별자는 양쪽 부모로부터 `상속`한 주문번호와 상품번호다. 두 값을 조합했을 때 중복 인스턴스를 허용하지 않는다는 뜻이다. 따라서 한 주문(=같은 주문번호)에서 여러 상품을 주문할 수는 있지만, 같은 상품을 여러 번 주문할 수는 없다.

#
<img src="https://user-images.githubusercontent.com/66513003/118951939-7854fa00-b996-11eb-89e1-07df18d79ba3.png
" width="400">

- 위 데이터 모델에서는 상품번호가 식별자가 아니므로 한 주문에서 같은 상품을 여러 번 주문할 수 있고, 그때마다 주문순번 값이 달라진다. 고객은 주문을 여러 번 할 수 있고, 한 주문에서 여러 상품을 주문할 수 있으므로 동일 상품을 여러 번 주문할 수 있다.

#
**9. 주문상세 엔터티의 주식별자에 대한 설명**
<img src="https://user-images.githubusercontent.com/66513003/118952239-bce09580-b996-11eb-9c9f-15c4f80f48c4.png
" width="400">

- 주문상세 엔터티의 모든 인스턴스를 유일하게 식별할 수 있다.
- 주식별자 중 주문번호는 주문 엔터티로부터 상속받을 외래 식별자다.
- 주문순번 속성을 NULL값을 입력할 수 없다.

- 주식별자 중 주문순번은 중복값이 없어야 하지만 주문번호마다 꼭 `순차적으로 부여할 의무는 없다.`

#

**10. 부모 엔터티와 자식 엔터티가 식별관게를 가지는 데이터 모델**

<img src="https://user-images.githubusercontent.com/66513003/118955464-ae47ad80-b999-11eb-9293-f6b7bccf725e.png
" width="400">

- 1, 2는 IE 표기법을 사용한 데이터 모델이다. 두 모델은 관계선이 둘 다 `점선`이므로 비식별관계를 표현하고 있다.
- 3, 4는 Barker 표기법을 사용했으며, 3번은 자식쪽 관계선에 `UID Bar(수직 실선)`를 표시했으므로 식별관계이다.

- 식별관계
    - 부모 엔터티의 식별자를 자식 엔터티의 식별자로 상속하는 관계
    - IE 표기법 : 관계선 전체를 실선으로 표현
    - Barker 표기법 : 자식 쪽 고나계선에 UID Bar(수직 실선) 표시

#