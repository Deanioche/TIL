# 정규화

## **목차**
### 1. 좋은 릴레이션과 나쁜 릴레이션
### 2. 함수적 종속성
### 3. 정규화

<br>
<br>
<br>

## **나쁜 릴레이션의 예**

1. 데이터의 중복
- 일관성 훼손으로 데이터 관리가 비효율적.
- 저장 공간 낭비

2. 갱신 이상
- 삽입 이상 : 레코드 추가시 불필요한 컬럼의 값 없이는 추가하지 못 하는 경우.
- 삭제 이상 : 삭제시 의도하지 않았던 다른 데이터가 삭제되는 경우.
- 수정 이상 : 중복 저장된 레코드를 수정 시 모두 반영이 안되서 데이터베이스의 일관성이 깨지는 경우.

## **좋은 릴레이션의 개념**

1. 컴퓨터 프로그래머적 관점에서의 모델링.

    ```어떻게 데이터를 저장해야 하는가?```

2. 릴레이션의 스키마가 얼마나 효율적으로 실세계를 반영하고 있는지 평가.

3. 고려사항
- 한 릴레이션 내의 컬럼 간의 관계 분석.
- 원하지 않는 데이터의 종속과 중복 제거.
- 새로운 컬럼들이 데이터베이스에 추가될 때 기존 컬럼과의 관계 수정을 최소화.
*
## **좋은 릴레이션**


- 분류에 맞게 테이블을 분할

<br>
<br>
<br>

# **함수적 종속성**
- 함수적 종속성의 정의
- 함수적 종속성의 확장
- 커버와 카노니컬 커버


## **함수적 종속성의 정의**

1. 릴레이션 인스턴스를 분석하여 속성들 강의 연관관계를 표현한 것.
2. 릴레이션의 효율성을 향상시켜 좋은 릴레이션으로 변환하는데 이용.

```
임의의 릴레이션 스키마 R의 인스턴스 r(R)에 포함되는 서로 다른 두 레코드 r1,r2와 컬럼 집합 X와 Y에 대해, r1[X] = r2[Y]일 때, r1[y] = r2[y]이면 함수적 종속성 X -> Y가 성립한다.
```

>멤버의 등급에 따라 할인율이 달라지는 테이블에서  
등급이 GOLD일때 할인율은 항상 5%이고  
등급이 VIP일때 할인율은 항상 10%이다.  
즉, 멤버의 등급이 같으면 할인율도 같다면,  
`등급이 할인율을 종속한다.`  
`{등급} -> {할인율}`


## **함수적 종속성의 확장**
1. 함수적 종속성은 릴레이션의 효율성 여부에 중요한 판단기준.
1. 그러나 릴레이션의 인스턴스만으로 내재된 모든 함수적 종속성을 찾아내기 어려움.
1. 판별되지 않은 모든 함수적 종속성을 찾기 위해 추론 규칙을 사용하여 함수적 종속성을 확장.
1. 클로저 (Closure)
    - 판별된 함수적 종속성 집합으로부터 유추할 수 있는 모든 함수적 종속성 집합.
        `F+`

## **함수적 종속성 추론 규칙**

1. 재귀성규칙: 𝑋⊇𝑌(X가 Y의 부분집합)이면, 𝑋→𝑌(X는 Y에 종속한다.)이다.
    - `{등급, 할인율} -> {할인율}`

2. 부가성규칙: 𝑋→𝑌이면, 𝑋𝑍→𝑌𝑍이다.
    - `X가 Y에 종속되면, X와 Y에 새로운 컬럼을 추가해도 종속된다.`

3. 이행성규칙: 𝑋→𝑌이고, 𝑌→𝑍이면, 𝑋→𝑍이다.  
    - `X가 Y를 종속하고 Y가 Z를 종속하면, X는 Z를 종속한다.`

4. 분해규칙: 𝑋→𝑌𝑍이면, 𝑋→𝑌이다. 
    - `X가 YZ를 종속하면, X가 Y와 Z를 각각 종속한다.`

5. 합집합규칙: 𝑋→𝑌이고, 𝑋→𝑍이면, 𝑋→𝑌𝑍이다.   
6. 의사이행성규칙: 𝑋→𝑌이고, 𝑊𝑌→𝑍이면, 𝑊𝑋→𝑍이다.

<br>

![image](https://user-images.githubusercontent.com/66513003/116186105-efafb900-a75d-11eb-8015-e743d3132378.png)

### **종속성 찾기**
 - `{고객번호} -> {고객명}`  
 C1이면 무조건 유관순이고 C2면 무조건 손병희이므로 고객번호는 고객명을 종속한다. `True`

 - `{고객명} -> {등급}`
 유관순이면 GOLD이고 지청천이면 VIP이고 안중근이면 VIP이며 예외가 없으므로 고객명은 등급을 종속한다. `True`

 - `{고객번호, 고객명} -> {할인율}`
 {C1, 유관순}인 컬럼의 할인율을 5%이고, {C6, 윤봉길}의 할인율은 3%로 이며 등등 이에 예외가 없으므로 {고객번호, 고객명}은 할인율을 종속한다. `True`

 그러므로, `고객번호 -> {고객명, 등급, 할인율}`도 성립한다.

